[gd_scene load_steps=7 format=2]

[ext_resource path="res://resources/tilesets/pathfinding/pathtile.tres" type="TileSet" id=1]
[ext_resource path="res://scenes/levels/local_resources/pathfinding/Pathtiles.gd" type="Script" id=2]
[ext_resource path="res://scenes/levels/Spawns.gd" type="Script" id=3]
[ext_resource path="res://resources/tilesets/walls/walltile.tres" type="TileSet" id=4]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

void fragment() {
    // Get the vertex color or the color from the texture if set
    vec4 finalColor = min(texture(TEXTURE, UV), COLOR);
    //vec3 finalColor = textureLod(SCREEN_TEXTURE, SCREEN_UV, 0.0).rgb;

    if(AT_LIGHT_PASS) {
        // For all fragments in the light we just use the input color
        COLOR = finalColor;
    } else {
        // For all other fragments we make them B&W
        float value = dot(finalColor.rgb, vec3(0.2125, 0.7154, 0.0721));
        //value = dot(finalColor.rgb, vec3(0.1, 0.1, 0.1));
        COLOR = vec4(value, value, value, 1.0);
    }
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )

[node name="Level" type="Node2D"]
material = SubResource( 2 )

[node name="Pathtiles" type="TileMap" parent="."]
tile_set = ExtResource( 1 )
format = 1
script = ExtResource( 2 )

[node name="Ground" type="Node2D" parent="."]

[node name="Groundtiles" type="TileMap" parent="Ground"]
use_parent_material = true
format = 1

[node name="InsideProps" type="Node2D" parent="."]

[node name="Props" type="Node2D" parent="InsideProps"]

[node name="Spawns" type="Node2D" parent="InsideProps"]
script = ExtResource( 3 )

[node name="Walltiles" type="TileMap" parent="."]
tile_set = ExtResource( 4 )
format = 1

[node name="OutsideProps" type="Node2D" parent="."]

[node name="Props" type="Node2D" parent="OutsideProps"]

[node name="Spawns" type="Node2D" parent="OutsideProps"]

[node name="Notes" type="Node2D" parent="."]
